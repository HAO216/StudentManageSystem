# StudentManageSystem

## 项目概述
本项目是一个学生成绩管理系统，主要用于管理学生的基本信息和成绩数据。项目结合了内存数据库、Redis 以及分布式节点同步等功能，实现了学生信息和成绩的增删改查操作，同时支持节点间的数据同步。

## 主要功能
- **学生信息管理**：包括添加、删除、修改和查询学生的基本信息（如姓名、学号、性别、班级等）。
- **成绩管理**：对学生的成绩进行添加、删除、修改和查询操作。
- **数据存储**：使用基于内存的 NoSQL 数据库进行数据存储，并结合 Redis 实现数据的持久化。
- **分布式同步**：通过 Gossip 协议实现节点间的数据同步。

## 数据结构
### 学生相关数据结构
- **StudentInterface**：定义了学生接口，包含获取学生 ID、姓名、性别、班级、成绩以及设置成绩的方法。
- **Student**：学生的基本结构体，包含学生的姓名、学号、性别、班级和成绩等信息。
- **Undergraduate** 和 **Graduate**：分别为本科生和研究生结构体，继承自 `Student` 结构体，并实现了 `StudentInterface` 接口的方法。

### 数据库相关数据结构
- **Database**：作为基于内存的 NoSQL 数据库，包含一个存储数据的映射 `data`，读写锁 `mu` 用于并发控制，以及 Redis 客户端 `rdb` 用于数据持久化。
- **StudentManager**：学生管理器结构体，包含一个存储学生信息的映射 `students`，互斥锁 `mu` 用于并发控制，以及数据库实例 `db` 用于数据存储。

### 节点相关数据结构
- **Node**：节点结构体，包含节点的 ID、地址、数据库实例和对等节点列表，用于实现分布式节点间的数据同步。

## 线程模型
本项目主要使用了以下线程模型：
- **读写锁（sync.RWMutex）**：在 `Database` 结构体中使用读写锁 `mu` 来控制对数据的并发访问，允许多个 goroutine 同时进行读操作，但在写操作时会进行互斥，确保数据的一致性。
- **互斥锁（sync.Mutex）**：在 `StudentManager` 结构体中使用互斥锁 `mu` 来控制对学生信息的并发访问，确保在添加、删除、修改学生信息时的线程安全。

## 使用的技术栈
- **Go 语言**：作为主要的开发语言，利用其高效的并发性能和丰富的标准库。
- **Gin 框架**：用于构建 Web 服务，处理 HTTP 请求和响应。
- **Redis**：作为数据持久化存储，使用 `github.com/go-redis/redis/v8` 包进行操作。
- **Viper**：用于配置管理，读取和解析配置文件。

